 \documentclass[11pt,twoside,a4paper]{article}

\usepackage[polish]{babel}
\usepackage{polski}
\usepackage[utf8]{inputenc}
\usepackage[OT4]{fontenc}
\usepackage{tgtermes}	%Times New Roman
\usepackage[left=2.5cm,top=2.5cm,right=2.5cm,bottom=2.5cm,
headsep=0.5cm,headheight=1.0cm,marginpar=2cm,reversemp]{geometry}
\usepackage{fancyhdr}
\usepackage[table]{xcolor}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amsthm,thmtools}
\usepackage[nottoc]{tocbibind}
\usepackage{ragged2e}
\usepackage{bbding}
\usepackage{makeidx}
\usepackage{titlesec}
\usepackage{tcolorbox}
\usepackage{url}
\usepackage{color}
\usepackage{setspace}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage{BeamerColor}
\usepackage{listings}
\usepackage{pdfpages}
\usepackage{hyperref}
\usepackage{tikz}

\usetikzlibrary{arrows,positioning}

% Define tikz styles
\tikzset{
  % Text box, 6em width, centered, rounded corners
  TBox6emCentered/.style={
    rectangle,
    rounded corners,
    draw=black, very thick,
    text width=6.5em,
    minimum height=2em,
    text centered}
}

\definecolor{mycolor1}{RGB}{0,0,128}
\definecolor{lightgray}{gray}{0.9}
\definecolor{lightlightgray}{gray}{0.95}
\definecolor{lightyellow}{RGB}{255,255,224}
\definecolor{lemonchiffon}{RGB}{255,250,205}



\newcommand{\mat}[1]{\boldsymbol{\mathrm{#1}}}

\hypersetup{
	pdftitle={Metody Programowania Robotów},
	pdfauthor={Pawe\l{} Malczyk, Pawe\l{} Tomulik},
	pdfkeywords={systemy operacyjne czasu rzeczywistego, QNX, robot},
	pdfsubject={Zestaw instrukcji laboratoryjnych QNX}
	pageanchor=true,
	breaklinks=true,
	plainpages=false,
	linktocpage=true
}
% zmiana nazw domyślnych
\addto\captionspolish
{
	\renewcommand{\tablename}{Tabela}
	\renewcommand{\listtablename}{Spis tabel}
	\renewcommand{\bibname}{Piśmiennictwo}
	\renewcommand{\chaptername}{Laboratorium}
}


%\newtheoremstyle{mystyle}% name of the style to be used
%  {12pt}% measure of space to leave above the theorem. E.g.: 3pt
%  {12pt}% measure of space to leave below the theorem. E.g.: 3pt
%  {\itshape}% name of font to use in the body of the theorem
%  {6pt}% measure of space to indent
%  {\bfseries}% name of head font
%  {\newline}% punctuation between head and body
%  {.5em}% space after theorem head; " " = normal interword space
%  {}% Manually specify head
%\theoremstyle{mystyle}
%\newtheorem{example}{\color{black}Przykład}[section]


\declaretheoremstyle[
spaceabove=6pt, spacebelow=6pt,
headfont=\normalfont\bfseries,
notefont=\mdseries,
notebraces={[}{]},
%bodyfont=\itshape,
postheadspace=1em,
%qed=\qedsymbol
]{mystyle}
\declaretheorem[name=Przykład,numberwithin=subsection,style=mystyle]{example}
%\declaretheorem[name=Definition]{definition}



%\definecolor{lightyellow}{RGB}{255,255,224}
%\definecolor{lemonchiffon}{RGB}{255,250,205}
\definecolor{syntax}{RGB}{127,0,85}
\definecolor{comments}{RGB}{63,127,95}
\definecolor{strings}{RGB}{42,0,255}

\lstdefinestyle{MyCStyle} {
    language=C, % choose the language of the code
    alsolanguage=C++,
    basicstyle=\linespread{0.9}\fontfamily{lmtt}\selectfont\small\color{black},
    keywordstyle={\bfseries\color{syntax}}, % style for keywords
    emph={int,char,double,float,unsigned,printf,getchar,putchar,
sprintf,scanf,fopen,fscanf,fprintf,fclose,pthread_self,pthread_create,sleep,exit,pthread_t,
pthread_exit,pthread_cancel,pthread_join,pthread_attr_init,pthread_attr_setdetachstate,pthread_attr_destroy,
pthread_attr_getdetachstate,pthread_attr_setdetachstate,pthread_attr_getinheritsched,pthread_attr_setinheritsched,
pthread_attr_getschedpolicy,pthread_attr_setschedpolicy,pthread_attr_getschedparam,pthread_attr_setschedparam,
pthread_attr_getscope,pthread_attr_setscope,pthread_attr_getstacksize,pthread_attr_getstackaddr,pthread_attr_setstacksize,
pthread_attr_setstackaddr,pthread_attr_t,srand,time,rand,pthread_mutex_init,pthread_mutex_t,pthread_mutex_destroy,
pthread_mutex_lock,pthread_mutex_timedlock,time_t,pthread_mutex_trylock,pthread_mutex_unlock,
pthread_cond_init,pthread_cond_destroy,pthread_cond_wait,pthread_cond_timedwait,pthread_cond_signal,pthread_cond_broadcast,
pthread_barrier_init, pthread_barrier_t,pthread_barrierattr_t,pthread_barrier_wait,pthread_barrier_destroy,
pthread_cond_t,pthread_mutexattr_t,pthread_condattr_t,ChannelCreate,ChannelCreate_r,
ChannelDestroy,ChannelDestroy_r,ChannelAttach,ChannelDetach,MsgReceive,MsgReply,MsgSend,strerror,ConnectAttach,ConnectAttach_r,
pid_t,uint32_t,ConnectDetach,ConnectDetach_r,MsgSend_r,MsgReceive_r,name_attach,name_detach,name_open,name_close,
open,MsgReply_r,atoi,strcpy,_uint16,_int8,_uint8,_int32,MsgSendPulse,MsgReceivePulse,clock_gettime,perror,
clock_getres,clock_settime,ctime,nanosleep,delay,select,alarm,nanospin,timer_create,timer_settime,timer_gettime,timer_delete,
getpid},
    emphstyle={\bfseries\color{syntax}},
    stringstyle=\color{strings},
    commentstyle={\fontfamily{lmtt}\selectfont\color{comments}},
    numbers=left, % where to put the line-numbers
    numberstyle=\tiny, % the size of the fonts that are used for the line-numbers
    backgroundcolor=\color{lemonchiffon},
%    backgroundcolor=\color{lightgray},
    showspaces=false, % show spaces adding particular underscores
    showstringspaces=false, % underline spaces within strings
    showtabs=false, % show tabs within strings adding particular underscores
    frame=single, % adds a frame around the code
    tabsize=2, % sets default tabsize to 2 spaces
    rulesepcolor=\color{gray},
    rulecolor=\color{black},
    captionpos=t, % sets the caption-position to bottom
    breaklines=true, % sets automatic line breaking
    breakatwhitespace=false,
    xleftmargin=20pt,
    xrightmargin=20pt,
    aboveskip=12pt,
    belowskip=12pt,
    escapeinside={(*@}{@*)},
%   frameround=tttt,
   framexleftmargin=5mm,
   frame=shadowbox,
   rulesepcolor=\color{lightgray},
   extendedchars=\true,
   inputencoding=utf8,
}

\lstdefinestyle{MyBashStyle} {
    language=bash, % choose the language of the code
    basicstyle=\linespread{0.9}\fontfamily{lmtt}\selectfont\small\color{black},
    keywordstyle={\color{black}}, % style for keywords
    emph={},
    emphstyle={\color{black}},
    stringstyle=\color{black},
    commentstyle={\fontfamily{lmtt}\selectfont\color{black}},
    numbers=left, % where to put the line-numbers
    numberstyle=\tiny, % the size of the fonts that are used for the line-numbers
    backgroundcolor=\color{lemonchiffon},
%    backgroundcolor=\color{lightgray},
    showspaces=false, % show spaces adding particular underscores
    showstringspaces=false, % underline spaces within strings
    showtabs=false, % show tabs within strings adding particular underscores
    frame=single, % adds a frame around the code
    tabsize=2, % sets default tabsize to 2 spaces
    rulesepcolor=\color{gray},
    rulecolor=\color{black},
    captionpos=t, % sets the caption-position to bottom
    breaklines=true, % sets automatic line breaking
    breakatwhitespace=false,
    xleftmargin=20pt,
    xrightmargin=20pt,
    aboveskip=12pt,
    belowskip=12pt,
    escapeinside={(*@}{@*)},
%   frameround=tttt,
   framexleftmargin=5mm,
   frame=shadowbox,
   rulesepcolor=\color{lightgray},
   extendedchars=\true,
   inputencoding=utf8,
}



\renewcommand*\lstlistingname{Kod źródłowy}
\renewcommand{\qedsymbol}{\rule{1ex}{1ex}}


%\lstset{language=Fortran, numbers=left, numberstyle=\tiny, stepnumber=1, numbersep=0pt, tabsize=5,keywordstyle=\color{black}\bfseries,aboveskip=10pt,belowskip=36pt,
%xleftmargin=20pt,xrightmargin=20pt}
%\lstset{emph={Procedura,Oblicz},emphstyle={\color{black}\bfseries},
%label=list1}
%\renewcommand*\lstlistingname{Tekst programu}
%
%\begin{lstlisting}[frame=lines,caption={Pseudokod algorytmu dziel i~zdobywaj z~dyrektywami kompilatora OpenMP}]
%\end{lstlisting}


\renewcommand{\labelitemi}{$\bullet$}
%\renewcommand{\labelitemii}{$\cdot$}
%\renewcommand{\labelitemiii}{$\diamond$}
%\renewcommand{\labelitemiv}{$\ast$}

% Wielkosc wciecia akapitowego
\parindent=0.5cm
% Odstepy miedzy akapitami
\parskip=6pt

% Uklad strony
% \pagestyle{empty}
\fancyhead{}
\pagestyle{fancy}
% Naglowki na stronie parzystej (E) i nieparzystej (O) , Right Left Center
%\fancyhead[CO]{\small \nouppercase{\textbf\rightmark}}
%\fancyhead[CE]{\small \nouppercase{\textbf\leftmark}}

%\lhead{\textbf{\small{\leftmark}}}
%\rhead{\small{Pawel Malczyk}}
%\lfoot{\textbf{\tiny{Konspekt do Podstaw Automatyki i Sterowania II}}}
%\rfoot{}

\fancyhead[CE]{\small \nouppercase{\textbf\leftmark}}
\fancyhead[CO]{\small \nouppercase{\textbf{Metody Programowania Robotów (QNX RTOS)}}}

\fancyfoot[RE,RO]{\footnotesize Paweł Malczyk, Paweł Tomulik}
\fancyfoot[LE,LO]{\footnotesize Rozpowszechnianie bez zgody autorów zabronione}
%\fancyfoot[RE,RO]{\footnotesize Rozpowszechnianie bez zgody autorów zabronione}

\linespread{1.0}
\title{\vspace{4.25cm}\Huge{\textbf{Metody Programowania Robotów}} \\ \vskip10pt\LARGE{\textit{Zestaw instrukcji laboratoryjnych do programowania aplikacji w~systemie operacyjnym czasu rzeczywistego QNX Neutrino}}}
\author{\Large{\textbf{Paweł Malczyk, Paweł Tomulik}}\vspace{0.5cm} \\ Zakład Teorii Maszyn i Robotów \\
Instytut Techniki Lotniczej i Mechaniki Stosowanej \\
Wydział Mechaniczny Energetyki i Lotnictwa \\
Politechnika Warszawska \\
{\href{mailto:pmalczyk@meil.pw.edu.pl}{pmalczyk@meil.pw.edu.pl}}, \href{mailto:ptomulik@meil.pw.edu.pl}{ptomulik@meil.pw.edu.pl} \\ Strona laboratorium: \\ \textbf{\footnotesize\href{http://ztmir.meil.pw.edu.pl/web/Dydaktyka/Prowadzone-przedmioty/Metody-programowania-robotow/Materialy}{http://ztmir.meil.pw.edu.pl/web/Dydaktyka/Prowadzone-przedmioty/Metody-programowania-robotow/Materialy}}}
\date{październik 2015 r.}

\linespread{1.3}

%  \titleformat{<command>}[<shape>]{<format>}{<label>}{<sep>}{<before-code>}[<after-code>]


\titleformat
{\section}
[display]
{\color{black}\normalfont\Large\bfseries\centering}
{\color{black}{\rule{\textwidth}{1pt}\\ \LARGE Laboratorium~\thesection}}
{-1em}
{
    %\rule{\textwidth}{1pt}
    \vspace{1ex}
    \centering
}
[
\vspace{-2.5ex}%
\rule{\textwidth}{0.3pt}
] % after-code

\titleformat{\subsection}
{\color{black}\normalfont\Large\bfseries}
{\color{black}\thesubsection}{1em}{}

\newenvironment{myitemize}
{ \begin{itemize}
    \setlength{\itemsep}{0pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}     }
{ \end{itemize}                  }

\newenvironment{myenumerate}
{ \begin{enumerate}
    \setlength{\itemsep}{0pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}     }
{ \end{enumerate}                  }


\begin{document}
\maketitle
\cleardoublepage

\input{qnxlab1.tex}
\input{qnxlab2.tex}
\input{qnxlab3.tex}
\input{qnxlab4.tex}
\input{qnxlab5.tex}
\input{qnxlab6.tex}
\input{qnxlab7.tex}
\input{qnxlab8.tex}
\input{qnxlab9.tex}
\input{qnxlab10.tex}

\clearpage

\tableofcontents

\renewcommand{\listtheoremname}{Spis przykładów}
\listoftheorems[ignoreall,show=example]


\cleardoublepage
\phantomsection
%% \addcontentsline{toc}{section}{Spis rysunków}
\listoffigures

\phantomsection
%% \addcontentsline{toc}{section}{Spis tabel}
\listoftables

\cleardoublepage
\bibliographystyle{plplain}
\nocite{*}
\phantomsection \label{pismiennictwo}
%% \addcontentsline{toc}{section}{Piśmiennictwo}
\bibliography{qnxlab}

\end{document}
